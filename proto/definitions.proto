syntax = "proto3";

package dialog;

import "descriptor.proto";
import "wrappers.proto";

option go_package = "dialog";
option java_package = "im.dlg.grpc.services";

/// Структура UUID
message UUIDValue {
  /// Старшие биты UUID
  int64 msb = 1;

  /// Младшие биты UUID
  int64 lsb = 2;
}

/// Структура обобщенного оповещения об ошибке
message UpdateErrorCause {
  /// Вид ошибки
  oneof value  {
    Rejected rejected = 1;
    Failed failed = 2;
  }

  /// Структура, описывающая мотивированный отказ от выполнения какого-либо действия
  message Rejected {
    google.protobuf.StringValue reason = 1;
  }

  /// Структура, описывающая сбой при выполнении какого-либо действия
  message Failed {
    google.protobuf.StringValue description = 1;
    google.protobuf.StringValue tag = 2;
  }
}


message DialogOptions {
  Level log = 1;
  bool required = 2;
}

extend google.protobuf.FieldOptions {
  DialogOptions dlg = 100001;
}

/// server timestamp when state was created or modified
message DataClock {
  int64 clock = 1;
}

enum Level {
  log_default = 0;
  log_sensitive = 1;
  log_confidential = 2;
}
